import{h as L}from"./IShi1APO.js";import{u as O}from"./DWiB50td.js";import{D as $,ap as u,H as q,aq as x}from"./BbStRG96.js";function C(o,e,c){const[t={},r]=typeof e=="string"?[{},e]:[e,c],s=$(()=>u(o)),n=t.key||L([r,typeof s.value=="string"?s.value:"",...E(t)]);if(!n||typeof n!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+n);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const i=n===r?"$f"+n:n;if(!t.baseURL&&typeof s.value=="string"&&s.value[0]==="/"&&s.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:m,default:d,transform:b,pick:g,watch:f,immediate:w,getCachedData:v,deep:D,dedupe:_,...k}=t,h=q({...x,...k,cache:typeof t.cache=="boolean"?void 0:t.cache}),F={server:l,lazy:m,default:d,transform:b,pick:g,immediate:w,getCachedData:v,deep:D,dedupe:_,watch:f===!1?[]:[h,s,...f||[]]};let a;return O(i,()=>{var y;(y=a==null?void 0:a.abort)==null||y.call(a),a=typeof AbortController<"u"?new AbortController:{};const p=u(t.timeout);return p&&setTimeout(()=>a.abort(),p),(t.$fetch||globalThis.$fetch)(s.value,{signal:a.signal,...h})},F)}function R(o,e,c){const[t={},r]=typeof e=="string"?[{},e]:[e,c];return C(o,{...t,lazy:!0},r)}function E(o){var c;const e=[((c=u(o.method))==null?void 0:c.toUpperCase())||"GET",u(o.baseURL)];for(const t of[o.params||o.query]){const r=u(t);if(!r)continue;const s={};for(const[n,i]of Object.entries(r))s[u(n)]=u(i);e.push(s)}return e}export{R as u};
